// File: view/bbs.js
$("form").keyup(function(e){var jthis=$(this);if((e.ctrlKey&&(e.which==13||e.which==10))||(e.altKey&&e.which==83)){jthis.trigger("submit");return false}});$(".tap").on("click",function(e){var href=$(this).attr("href")||$(this).data("href");if(e.target.nodeName=="INPUT"){return true}if($(window).width()>992){return}if(e.ctrlKey){window.open(href);return false}else{window.location=href}});$("ul.nav > li").on("click",function(e){var jthis=$(this);var href=jthis.children("a").attr("href");if(e.ctrlKey){window.open(href);return false}});$('.thread input[type="checkbox"]').parents("td").on("click",function(e){e.stopPropagation()});$("a.confirm").on("click",function(){var jthis=$(this);var text=jthis.data("confirm-text");$.confirm(text,function(){var method=xn.strtolower(jthis.data("method"));var href=jthis.data("href")||jthis.attr("href");if(method=="post"){$.xpost(href,function(code,message){if(code==0){window.location.reload()}else{alert(message)}})}else{}});return false});$("input.checkall").on("click",function(){var jthis=$(this);var target=jthis.data("target");jtarget=$(target);jtarget.prop("checked",this.checked)});$("body").on("click",".post_delete",function(){var jthis=$(this);var href=jthis.data("href");var isfirst=jthis.attr("isfirst");if(window.confirm(lang.confirm_delete)){$.xpost(href,function(code,message){var isfirst=jthis.attr("isfirst");if(code==0){if(isfirst=="1"){$.location('<?php echo url("forum-$fid");?>')}else{jthis.parents(".post").remove();var jposts=$(".posts");jposts.html(xn.intval(jposts.html())-1)}}else{$.alert(message)}})}return false});$("body").on("click",".post_reply",function(){var jthis=$(this);var tid=jthis.data("tid");var pid=jthis.data("pid");var jmessage=$("#message");var jli=jthis.closest(".post");var jpostlist=jli.closest(".postlist");var jadvanced_reply=$("#advanced_reply");var jform=$("#quick_reply_form");if(jli.hasClass("quote")){jli.removeClass("quote");jform.find('input[name="quotepid"]').val(0);jadvanced_reply.attr("href",xn.url("post-create-"+tid))}else{jpostlist.find(".post").removeClass("quote");jli.addClass("quote");var s=jmessage.val();jform.find('input[name="quotepid"]').val(pid);jadvanced_reply.attr("href",xn.url("post-create-"+tid+"-0-"+pid))}jmessage.focus();return false});